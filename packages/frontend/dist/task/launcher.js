var a=['setUpEnvironment','TaskEventKey','app','getPath','documents','_context','_launcherWindow','_eventListeners','_captchaRequesters','_taskEventHandler','bind','ipc','RequestRegisterTaskEventHandler','_onRegisterEventRequest','RequestDeregisterTaskEventHandler','_onDeregisterEventRequest','RequestStartHarvestCaptcha','_startHarvestEventHandler','_stopHarvestEventHandler','RequestStartTasks','RequestStopTasks','RequestAddProxies','RequestRemoveProxies','RequestChangeDelay','RequestWebhookUpdate','RequestWebhookTest','webContents','_sendToLauncher','isDevelopment','_debugHarvestedTokens','testid1','testStopHarvest','viewHarvestedFrontendTokens','sender','send','map','length','\x20requests','debug','HarvestCaptcha','push','start','authManager','getSession','log','Frontend\x20is\x20not\x20authed!\x20Skipping\x20start...','Already\x20Launched!\x20skipping\x20start...','resolve','launcher.html','BrowserWindow','ready-to-show','LOG_PATH','Launcher\x20Ready!','RegisterTaskEventHandler','destroyed','close','Launcher\x20Closed!','Launched!','stop','launcher\x20was\x20already\x20stopped','Closing\x20Launcher...','abortAllTasks','once','RequestAbortAllTasksForClose','includes','_addEventListener','_removeEventListener','filter','_captchaSemaphore','windowManager','startHarvestingCaptcha','value','token','promise','then','6LeoeSkTAAAAAA9rkZs5oS82l69OEYjKRZAiKdaF','fulfilled','[DEBUG]:\x20Cancelled\x20%d\x20pending\x20requests\x20for\x20runner\x20%s','[DEBUG]:\x20No\x20more\x20tokens\x20requested,\x20stopping\x20the\x20harvester','stopHarvestingCaptcha','exports','path','../common/constants','../_electron/env'];(function(c,d){var e=function(f){while(--f){c['push'](c['shift']());}};e(++d);}(a,0xf9));var b=function(c,d){c=c-0x0;var e=a[c];return e;};const Electron=require('electron');const path=require(b('0x0'));const IPCKeys=require(b('0x1'));const nebulaEnv=require(b('0x2'));nebulaEnv[b('0x3')]();const _TASK_EVENT_KEY=b('0x4');const _LOG_PATH=Electron[b('0x5')][b('0x6')](b('0x7'));class TaskLauncher{constructor(c){this[b('0x8')]=c;this[b('0x9')]=null;this[b('0xa')]=[];this[b('0xb')]={};this['_captchaSemaphore']=0x0;this[b('0xc')]=this[b('0xc')][b('0xd')](this);c[b('0xe')]['on'](IPCKeys[b('0xf')],this[b('0x10')]['bind'](this));c['ipc']['on'](IPCKeys[b('0x11')],this[b('0x12')][b('0xd')](this));c[b('0xe')]['on'](IPCKeys[b('0x13')],this[b('0x14')]['bind'](this));c[b('0xe')]['on'](IPCKeys['RequestStopHarvestCaptcha'],this[b('0x15')][b('0xd')](this));[IPCKeys[b('0x16')],IPCKeys[b('0x17')],IPCKeys[b('0x18')],IPCKeys[b('0x19')],IPCKeys[b('0x1a')],IPCKeys[b('0x1b')],IPCKeys[b('0x1c')]]['forEach'](d=>{c[b('0xe')]['on'](d,(e,...f)=>{if(this[b('0x9')]&&e['sender']!==this[b('0x9')][b('0x1d')]){this[b('0x1e')](d,...f);}});});if(nebulaEnv[b('0x1f')]()){this[b('0x20')]=[];this['_debugSentTokens']=[];c['ipc']['on']('debug',(g,h,...i)=>{switch(h){case'testStartHarvest':{this[b('0x14')](g,i[0x0]||b('0x21'),i[0x1]);break;}case b('0x22'):{this[b('0x15')](g,i[0x0]||'testid1',i[0x1]);break;}case b('0x23'):{g[b('0x24')][b('0x25')]('debug',h,this[b('0x20')]);break;}case'viewRunnerRequests':{const j=Object['keys'](this[b('0xb')])[b('0x26')](k=>k+':\x20'+this[b('0xb')][k][b('0x27')]+b('0x28'));g[b('0x24')]['send'](b('0x29'),h,j);break;}default:break;}});c['ipc']['on'](IPCKeys[b('0x2a')],(l,m,n,o)=>{this[b('0x20')][b('0x2b')]({'runnerId':m,'token':n,'siteKey':o});});}}async[b('0x2c')](){const p=await this[b('0x8')][b('0x2d')][b('0x2e')]();if(!p){if(nebulaEnv['isDevelopment']()){console[b('0x2f')](b('0x30'));}return;}if(this[b('0x9')]){if(nebulaEnv[b('0x1f')]()){console[b('0x2f')](b('0x31'));}return;}if(nebulaEnv[b('0x1f')]()){console[b('0x2f')]('Launching...');}const q='file:///'+path[b('0x32')](__dirname,b('0x33'));this[b('0x9')]=new Electron[(b('0x34'))]({'frame':![],'fullscreenable':![],'movable':![],'center':![],'resizable':![],'show':![],'hasShadow':![],'webPreferences':{'nodeIntegration':!![],'nodeIntegrationInWorker':!![],'webSecurity':!![],'allowRunningInsecureContent':![],'experimentalCanvasFeatures':![],'experimentalFeatures':![],'enableBlinkFeatures':'','preload':path[b('0x32')](__dirname,'adapter.js')}});this['_launcherWindow']['loadURL'](q);this[b('0x9')]['on'](b('0x35'),()=>{this[b('0x1e')](b('0x36'),_LOG_PATH);if(nebulaEnv[b('0x1f')]()||process['env']['NEBULA_ENV_SHOW_DEVTOOLS']){console['log'](b('0x37'));this[b('0x9')][b('0x1d')]['openDevTools']();}this[b('0x1e')](IPCKeys[b('0x38')]);this[b('0x8')][b('0xe')]['on'](_TASK_EVENT_KEY,this[b('0xc')]);});this['_launcherWindow'][b('0x1d')]['on'](b('0x39'),async()=>{if(this[b('0x9')]){await this['abortAllTasks']();this[b('0x9')][b('0x3a')]();}this[b('0x9')]=null;this['_context'][b('0xe')]['removeListener'](_TASK_EVENT_KEY,this[b('0xc')]);});this[b('0x9')]['on'](b('0x3a'),()=>{if(nebulaEnv['isDevelopment']()){console[b('0x2f')](b('0x3b'));}this[b('0x9')]=null;});if(nebulaEnv['isDevelopment']()){console[b('0x2f')](b('0x3c'));}}async[b('0x3d')](){if(!this[b('0x9')]){if(nebulaEnv[b('0x1f')]()){console['log'](b('0x3e'));}return;}if(nebulaEnv[b('0x1f')]()){console['log'](b('0x3f'));}await this[b('0x40')]();if(this['_launcherWindow']){this[b('0x9')][b('0x3a')]();}}async[b('0x40')](){if(!this[b('0x9')]){return;}await new Promise(r=>{this[b('0x8')][b('0xe')][b('0x41')](IPCKeys[b('0x42')],s=>{if(this['_launcherWindow']['webContents']===s[b('0x24')]){r();}});this[b('0x1e')](IPCKeys[b('0x42')]);});}['_sendToLauncher'](t,...u){if(this[b('0x9')]){this[b('0x9')][b('0x1d')]['send'](t,...u);}}[b('0xc')](v,w){if(this[b('0xa')][b('0x27')]>0x0){const x=[];this['_eventListeners']['forEach'](y=>{try{y[b('0x25')](_TASK_EVENT_KEY,w);x[b('0x2b')](y);}catch(z){}});this[b('0xa')]=x;}}['_onRegisterEventRequest'](A){let B=!![];if(this['_eventListeners'][b('0x43')](A['sender'])){B=![];}if(B){this[b('0x44')](A['sender']);A[b('0x24')][b('0x25')](IPCKeys[b('0xf')],_TASK_EVENT_KEY);}else{A[b('0x24')][b('0x25')](IPCKeys[b('0xf')],null);}}[b('0x12')](C){let D=!![];if(this['_eventListeners'][b('0x27')]===0x0){D=![];}if(!this[b('0xa')][b('0x43')](C[b('0x24')])){D=![];}if(D){this[b('0x45')](C[b('0x24')]);C[b('0x24')][b('0x25')](IPCKeys[b('0x11')],_TASK_EVENT_KEY);}else{C[b('0x24')][b('0x25')](IPCKeys['RequestDeregisterTaskEventHandler'],null);}}['_addEventListener'](E){if(!this[b('0x9')]){return;}this[b('0xa')]['push'](E);}[b('0x45')](F){if(!this[b('0x9')]){return;}this[b('0xa')]=this[b('0xa')][b('0x46')](G=>G!==F);}async[b('0x14')](H,I,J='6LeoeSkTAAAAAA9rkZs5oS82l69OEYjKRZAiKdaF'){if(!this[b('0xb')][I]){this[b('0xb')][I]=[];this[b('0x47')]+=0x1;if(this[b('0x47')]===0x1){await this[b('0x8')][b('0x48')][b('0x49')](I,J);}}const K=this['_context'][b('0x48')]['getNextCaptcha']();if(K[b('0x4a')]){this[b('0x1e')](IPCKeys[b('0x2a')],I,K['value'][b('0x4b')],J);}else{K[b('0x4c')][b('0x4d')](({token})=>{this[b('0x1e')](IPCKeys['HarvestCaptcha'],I,token,J);},()=>{});this[b('0xb')][I][b('0x2b')](K);}}[b('0x15')](L,M,N=b('0x4e')){if(this['_captchaRequesters'][M]){let O=0x0;this['_captchaRequesters'][M]['forEach'](({status,cancel})=>{if(status!==b('0x4f')){cancel();O+=0x1;}});console[b('0x2f')](b('0x50'),O,M);delete this[b('0xb')][M];this[b('0x47')]-=0x1;}if(this[b('0x47')]===0x0){console[b('0x2f')](b('0x51'));this[b('0x8')]['windowManager'][b('0x52')](M,N);}}}module[b('0x53')]=TaskLauncher;